<div class="edit-title">
  Enter your code below.
  {{#if content.tests_archive}}
    <span class="right">
      <a href="{{content.tests_archive}}"
         title="Download an archive with the latest generated tests"
         data-outward=true
         download>Download tests</a>
    </span>
  {{/if}}
</div>
<div class="edit-text">
{{view CodeEditorView
    value=source.code
    lang='python'
    placeholder="Type your code here..."}}

{{web-console code=source.code}}
</div>

<div class="code-quiz__upload-tests">
  <span title="Upload a zip archive with tests (N -- input filename, N.clue -- clue filename). These tests are used after generated by the generate() function." class="edit-tooltip">
    Upload tests (experimental):
  </span>
  {{attachment-list attachments=source.test_archive disabled=disabled maxFiles=1 maxSize=10485760}}
</div>

<div class="options">
  <label class="option">
    <span title="For each (single) test case" class="edit-tooltip">Time Limit (sec):</span>
    {{input type="number" min=1 step=1 name="execution_time_limit" value=source.execution_time_limit}}
  </label>
  <label class="option">
    <span title="For each (single) test case" class="edit-tooltip">Memory Limit (MB):</span>
    {{input type="number" min=1 step=1 name="execution_memory_limit" value=source.execution_memory_limit}}
  </label>
  <label class="option">
    <span title="Number of sample tests shown on step" class="edit-tooltip">Number of sample tests:</span>
    {{input type="number" min=0 step=1 name="samples_count" value=source.samples_count}}
  </label>
  <br>
  <label class="option s-checkbox">
    {{input type="checkbox" checked=source.is_time_limit_scaled class="s-checkbox__input"}}
    <span class="s-checkbox__border">
      <span class="s-checkbox__circle"></span>
    </span>
    <span title="Scale time limit for each language, or set it manually" class="edit-tooltip s-checkbox__label">Scale Time Limit</span>
  </label>
  <label class="option s-checkbox">
    {{input type="checkbox" checked=source.is_memory_limit_scaled class="s-checkbox__input"}}
    <span class="s-checkbox__border">
      <span class="s-checkbox__circle"></span>
    </span>
    <span title="Scale memory limit for each language, or set it manually" class="edit-tooltip s-checkbox__label">Scale Memory Limit</span>
  </label>
  <br><br>

{{#if is_limits_table_displayed}}
  <table width="100%">
    <thead>
      <tr>
        <th>Language</th>
        <th>Time Limit (sec)</th>
        <th>Memory Limit (MB)</th>
      </tr>
    </thead>
    <tbody>
    {{#each limits as |limit|}}
      <tr>
        <td>{{limit.language}}</td>
        <td>
          {{#if limit.is_manual_time}}
            {{input type="number" class="option" min=1 step=1 value=limit.manual_time}}
            <a {{action 'toggleManualLimit' limit.language 'time'}} class="">&#x2715;</a>
          {{else}}
            {{#if limit.is_time_correct}}
              {{limit.time}}
              {{#if source.is_time_limit_scaled}}
                <span style="color: lightgray"> = [{{limit.time_factor}} &times; {{source.execution_time_limit}}]</span>
              {{/if}}
            {{else}}
              ---
            {{/if}}
            <a {{action 'toggleManualLimit' limit.language 'time'}} class="">&#x270e;</a>
          {{/if}}
        </td>
        <td>
          {{#if limit.is_manual_memory}}
            {{input type="number" class="option" min=1 step=1 value=limit.manual_memory}}
            <a {{action 'toggleManualLimit' limit.language 'memory'}} class="">&#x2715;</a>
          {{else}}
            {{#if limit.is_memory_correct}}
              {{limit.memory}}
              {{#if source.is_memory_limit_scaled}}
                <span style="color: lightgray"> = [{{limit.memory_factor}} &times; {{source.execution_memory_limit}}]</span>
              {{/if}}
            {{else}}
              ---
            {{/if}}
            <a {{action 'toggleManualLimit' limit.language 'memory'}} class="">&#x270e;</a>
          {{/if}}
        </td>
      </tr>
    {{/each}}
    </tbody>
  </table>
{{/if}}


</div>
<div class="edit-title">
  Templates and restrictions for programming languages. Leave empty for defaults.<br>
  See <a target="_blank" href="{{st_config.project_main_instance_url}}lesson/9173/step/4">Documentation: Code</a> for more information.
</div>
<div class="edit-text">
  {{view CodeEditorView
    value=source.templates_data
    lang='python'
    placeholder=""}}
</div>
<hr>
<div class="right">See <a target="_blank" href="{{st_config.project_main_instance_url}}lesson/9173/step/1">Documentation: Code</a> for docs and examples.</div>
